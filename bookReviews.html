<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fictional Nest</title>
  <link rel="stylesheet" href="index.css"> 
</head>
<body>
  <header class="header">
    <h1 class="site-title">Fictional Nest</h1>
    <hr class="title-line">
  </header>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="#book-reviews">Book Reviews</a></li>
      <li><a href="bookNewsPage.html">Book News</a></li>
      <li><a href="aboutPage.html">About</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <section id="home">
      <h2>Search for Books</h2>
      <input type="text" id="search-input" placeholder="Enter book title or author..." />
      <button id="search-button">Search</button>
      <div id="search-results"></div>
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2024 Fictional Nest. All rights reserved.</p>
  </footer>

  <script>
    const apiKey = "AIzaSyDL_J47JCIjjrfrT0rVw9IvlGACWx1fTSQ"; // Your Google Books API key

    document.getElementById("search-button").addEventListener("click", function () {
      const query = document.getElementById("search-input").value;
      searchBooks(query);
    });

    function searchBooks(query) {
      const url = `https://www.googleapis.com/books/v1/volumes?q=${query}&key=${apiKey}`;
      
      fetch(url)
        .then(response => response.json())
        .then(data => displayResults(data))
        .catch(error => console.error("Error fetching data:", error));
    }

    function displayResults(data) {
      const resultsContainer = document.getElementById("search-results");
      resultsContainer.innerHTML = ""; // Clear previous results

      if (data.items) {
        data.items.forEach(item => {
          const title = item.volumeInfo.title || "No title available";
          const authors = item.volumeInfo.authors ? item.volumeInfo.authors.join(", ") : "No authors available";
          const rating = item.volumeInfo.averageRating ? item.volumeInfo.averageRating : "Not rated";
          const thumbnail = item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.thumbnail : "https://via.placeholder.com/150";


          const bookDiv = document.createElement("div");
          bookDiv.classList.add("book-item");
          bookDiv.innerHTML = `
            <img src="${thumbnail}" alt="Book cover" />
            <h3>${title}</h3>
            <p>Authors: ${authors}</p>
            <p>Average Rating: ${rating}</p>
            <input type="number" min="1" max="5" placeholder="Rate this book" class="rating-input" />
            <button class="rate-button">Rate</button>
          `;
          
          resultsContainer.appendChild(bookDiv);
        });

        // Add functionality to the rating buttons
        const rateButtons = document.querySelectorAll(".rate-button");
        rateButtons.forEach((button, index) => {
          button.addEventListener("click", () => {
            const ratingInput = button.previousElementSibling;
            const ratingValue = ratingInput.value;
            alert(`You rated this book ${ratingValue} star(s)!`);
          });
        });
      } else {
        resultsContainer.innerHTML = "<p>No results found.</p>";
      }
    }
  </script>
</body>
</html>

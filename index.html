<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fictional Nest</title>
  <link rel="stylesheet" href="index0.css"> 
</head>
<body>
 
  <header class="header">
    <h1 class="site-title">Fictional Nest</h1>
    <hr class="title-line">
  </header>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="#book-reviews">Book Reviews</a></li>
      <li><a href="bookNewsPage">Book News</a></li>
      <li><a href="aboutPage">About</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <section id="home">
       <h2>Search for Books</h2>
      <input type="text" id="book-search-input" placeholder="Enter book title or author">
      <button id="search button">Search</button>

      <div id="book results"></div>
 
      
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2024 Fictional Nest. All rights reserved.</p>
  </footer>

  <script>
    const apiKey = 'AIzaSyDL_J47JCIjjrfrT0rVw9IvlGACWx1fTSQ';

    document.getElementById('search-button').addEventListener('click', function() {
      const query = document.getElementById('book-search-input').value;
      fetchBooks(query);
    });

    function fetchBooks(query) {
      const url = `https://www.googleapis.com/books/v1/volumes?q=${query}&key=${apiKey}`;
      fetch(url)
        .then(response => response.json())
        .then(data => displayBooks(data.items))
        .catch(error => console.log(error));
    }

    function displayBooks(books) {
      const resultDiv = document.getElementById('book-results');
      resultsDiv.innerHTML = '';

      books.forEach(book => {
        const bookCard = document.createElement('div');
        bookCard.classList.add('book-card);

        const bookTitle = book.volumeInfo.title || 'No Title Available';
        const bookAuthor = book.volumeInfo.authors ? book.volumeInfo.authors.join(', ') :
        const bookDescription = book.volumeInfo.description || 'No Description Available';

        bookCard.innerHTML = `
          <h3>${bookTitle}</h3>
          <p><strong>Author:</strong> ${bookAuthor}</p>
          <p>${bookDescription}</p>
          <div class="rating">
            <span data-value="1" class="star">★</span>
            <span data-value="2" class="star">★</span>
            <span data-value="3" class="star">★</span>
            <span data-value="4" class="star">★</span>
            <span data-value="5" class="star">★</span>
          </div>
        `;
          

        resultsDiv.appendChild(bookCard);

        const stars = bookCard.querySelectorAll('.star');
        stars.forEach(star => {
          star.addEventListener('click', function() {
            const rating = this.getAttribute('data-value');
            highlightStars(stars, rating);
            localStorage.setItem(book.id, rating);
          });

          const savedRating = localStorage.getItem(book.id);
          if (savedRating) {
            highlightStars(stars, savedRating);
          }
        });
      });
    }

    function highlightStars(stars, rating) {
      stars.forEach(star => {
        if (star.getAttribute('data-value') <=rating) {
          star.classList.remove('highlighted');
        } else {
          star.classList.remove('highlighted');
        }
      });
    }
  </script>
</body>
</html>
